{% extends 'base.html' %}

{% block titulo %} Modificar Post {% endblock titulo %}

{% block contenido %}
<div class="container my-5">
    <div class="row justify-content-center">
        <div class="col-lg-8 col-md-10">
            <!-- Tarjeta con sombra y fondo translúcido -->
            <div class="card shadow-lg" style="background-color: rgba(255, 255, 255, 0.8); border-radius: 20px;">
                <div class="card-body p-5">
                    <h1 class="text-center mb-4">Modificar Post: {{ post.titulo }}</h1>

                    <!-- Formulario -->
                    <form action="" method="post" enctype="multipart/form-data">
                        {% csrf_token %}

                        <!-- Título del Post -->
                        <div class="form-floating mb-3">
                            {{ form.titulo }}
                            <label for="id_titulo">Título</label>
                        </div>

                        <!-- Encabezado (textarea con ajuste dinámico) -->
                        <div class="form-floating mb-3">
                            {{ form.encabezado }}
                            <label for="id_encabezado">Encabezado</label>
                        </div>

                        <!-- Contenido (textarea con ajuste dinámico) -->
                        <div class="form-floating mb-4">
                            {{ form.contenido }}
                            <label for="id_contenido">Contenido</label>
                        </div>

                        <!-- Categoría -->
                        <div class="form-floating mb-4">
                            {{ form.categoria }}
                            <label for="id_categoria">Categoría</label>
                        </div>

                        <!-- Imágenes -->
                        <div class="mb-4">
                            <label class="form-label">Imagen Principal</label>
                            {{ form.imagen1 }}
                        </div>

                        <div class="mb-4">
                            <label class="form-label">Imagen Secundaria</label>
                            {{ form.imagen2 }}
                        </div>

                        <!-- Botón para guardar cambios -->
                        <div class="text-center">
                            <button type="submit" class="btn btn-lg btn-primary px-5 py-2 rounded-pill shadow-sm">
                                Guardar Cambios
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Script para ajuste dinámico del tamaño de los textareas -->
<script>
    document.addEventListener("DOMContentLoaded", function() {
        const textareas = ['id_contenido', 'id_encabezado'].map(id => document.getElementById(id));

        // Función para ajustar el tamaño de los textareas
        function ajustarAltura(textarea) {
            textarea.style.height = 'auto';
            textarea.style.height = (textarea.scrollHeight) + 'px';
        }

        // Aplicar el ajuste a cada textarea
        textareas.forEach(textarea => {
            textarea.addEventListener("input", () => ajustarAltura(textarea));
            ajustarAltura(textarea); // Ajustar altura inicial si hay contenido
        });
    });
</script>

{% endblock contenido %}
